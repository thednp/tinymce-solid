var Ze=Object.defineProperty;var et=(e,t,n)=>t in e?Ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var le=(e,t,n)=>(et(e,typeof t!="symbol"?t+"":t,n),n);import{isServer as H,getRequestEvent as I,createComponent as w,delegateEvents as tt,ssrElement as Y,escape as L,mergeProps as nt,ssr as E,ssrHydrationKey as P,useAssets as rt,NoHydration as Ae,HydrationScript as ot,ssrAttribute as K,Hydration as st,renderToString as at,renderToStream as it}from"solid-js/web";import{M as ct,T as lt}from"./assets/index-BhCdQPVl.js";import{getOwner as $e,runWithOwner as Ce,createMemo as C,createContext as xe,createSignal as F,createRenderEffect as ut,untrack as ee,useContext as dt,on as Te,startTransition as ft,resetErrorBoundaries as ue,createComponent as Le,children as ht,Show as Pe,createRoot as pt,onCleanup as ke,lazy as mt,Suspense as gt,ErrorBoundary as yt,catchError as wt,sharedConfig as X}from"solid-js";import{H as Ne}from"./assets/HttpStatusCode-DH8IeaZe.js";import{provideRequestEvent as bt}from"solid-js/web/storage";import{H3Event as te,setResponseStatus as vt,sendRedirect as Rt,setHeader as St,getRequestIP as Et,getResponseStatus as At,getResponseStatusText as $t,getCookie as Ct,setCookie as xt,getRequestURL as Tt,getResponseHeaders as Lt,getResponseHeader as Pt,setResponseHeader as kt,appendResponseHeader as Nt,removeResponseHeader as _t,getRequestWebStream as Ht,eventHandler as Ot}from"h3";import{AsyncLocalStorage as qt}from"node:async_hooks";function _e(){let e=new Set;function t(r){return e.add(r),()=>e.delete(r)}let n=!1;function o(r,a){if(n)return!(n=!1);const s={to:r,options:a,defaultPrevented:!1,preventDefault:()=>s.defaultPrevented=!0};for(const i of e)i.listener({...s,from:i.location,retry:l=>{l&&(n=!0),i.navigate(r,{...a,resolve:!1})}});return!s.defaultPrevented}return{subscribe:t,confirm:o}}let ne;function ae(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),ne=window.history.state._depth}H||ae();function It(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function Ft(e,t){let n=!1;return()=>{const o=ne;ae();const r=o==null?null:ne-o;if(n){n=!1;return}r&&t(r)?(n=!0,window.history.go(-r)):e()}}const Mt=/^(?:[a-z0-9]+:)?\/\//i,Dt=/^\/+|(\/)\/+$/g,He="http://sr";function M(e,t=!1){const n=e.replace(Dt,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function G(e,t,n){if(Mt.test(t))return;const o=M(e),r=n&&M(n);let a="";return!r||t.startsWith("/")?a=o:r.toLowerCase().indexOf(o.toLowerCase())!==0?a=o+r:a=r,(a||"/")+M(t,!a)}function Ut(e,t){return M(e).replace(/\/*(\*.*)?$/g,"")+M(t)}function Oe(e){const t={};return e.searchParams.forEach((n,o)=>{t[o]=n}),t}function Wt(e,t,n){const[o,r]=e.split("/*",2),a=o.split("/").filter(Boolean),s=a.length;return i=>{const l=i.split("/").filter(Boolean),c=l.length-s;if(c<0||c>0&&r===void 0&&!t)return null;const d={path:s?"":"/",params:{}},y=h=>n===void 0?void 0:n[h];for(let h=0;h<s;h++){const m=a[h],S=l[h],u=m[0]===":",f=u?m.slice(1):m;if(u&&Q(S,y(f)))d.params[f]=S;else if(u||!Q(S,m))return null;d.path+=`/${S}`}if(r){const h=c?l.slice(-c).join("/"):"";if(Q(h,y(r)))d.params[r]=h;else return null}return d}}function Q(e,t){const n=o=>o.localeCompare(e,void 0,{sensitivity:"base"})===0;return t===void 0?!0:typeof t=="string"?n(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp?t.test(e):!1}function jt(e){const[t,n]=e.pattern.split("/*",2),o=t.split("/").filter(Boolean);return o.reduce((r,a)=>r+(a.startsWith(":")?2:3),o.length-(n===void 0?0:1))}function qe(e){const t=new Map,n=$e();return new Proxy({},{get(o,r){return t.has(r)||Ce(n,()=>t.set(r,C(()=>e()[r]))),t.get(r)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}function Ie(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),o=e.slice(t.index+t[0].length);const r=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(o);)r.push(n+=t[1]),o=o.slice(t[0].length);return Ie(o).reduce((a,s)=>[...a,...r.map(i=>i+s)],[])}const Bt=100,Kt=xe(),Fe=xe();function zt(e,t=""){const{component:n,load:o,children:r,info:a}=e,s=!r||Array.isArray(r)&&!r.length,i={key:e,component:n,load:o,info:a};return Me(e.path).reduce((l,c)=>{for(const d of Ie(c)){const y=Ut(t,d);let h=s?y:y.split("/*",1)[0];h=h.split("/").map(m=>m.startsWith(":")||m.startsWith("*")?m:encodeURIComponent(m)).join("/"),l.push({...i,originalPath:c,pattern:h,matcher:Wt(h,!s,e.matchFilters)})}return l},[])}function Gt(e,t=0){return{routes:e,score:jt(e[e.length-1])*1e4-t,matcher(n){const o=[];for(let r=e.length-1;r>=0;r--){const a=e[r],s=a.matcher(n);if(!s)return null;o.unshift({...s,route:a})}return o}}}function Me(e){return Array.isArray(e)?e:[e]}function De(e,t="",n=[],o=[]){const r=Me(e);for(let a=0,s=r.length;a<s;a++){const i=r[a];if(i&&typeof i=="object"){i.hasOwnProperty("path")||(i.path="");const l=zt(i,t);for(const c of l){n.push(c);const d=Array.isArray(i.children)&&i.children.length===0;if(i.children&&!d)De(i.children,c.pattern,n,o);else{const y=Gt([...n],o.length);o.push(y)}n.pop()}}}return n.length?o:o.sort((a,s)=>s.score-a.score)}function D(e,t){for(let n=0,o=e.length;n<o;n++){const r=e[n].matcher(t);if(r)return r}return[]}function Jt(e,t){const n=new URL(He),o=C(l=>{const c=e();try{return new URL(c,n)}catch{return console.error(`Invalid path ${c}`),l}},n,{equals:(l,c)=>l.href===c.href}),r=C(()=>o().pathname),a=C(()=>o().search,!0),s=C(()=>o().hash),i=()=>"";return{get pathname(){return r()},get search(){return a()},get hash(){return s()},get state(){return t()},get key(){return i()},query:qe(Te(a,()=>Oe(o())))}}let T;function Vt(){return T}let U=!1;function de(e){U=e}function Yt(e,t,n,o={}){const{signal:[r,a],utils:s={}}=e,i=s.parsePath||(p=>p),l=s.renderPath||(p=>p),c=s.beforeLeave||_e(),d=G("",o.base||"");if(d===void 0)throw new Error(`${d} is not a valid base path`);d&&!r().value&&a({value:d,replace:!0,scroll:!1});const[y,h]=F(!1),m=async p=>{h(!0);try{await ft(p)}finally{h(!1)}},[S,u]=F(r().value),[f,b]=F(r().state),g=Jt(S,f),k=[],x=F(H?Qe():[]),N=C(()=>typeof o.transformUrl=="function"?D(t(),o.transformUrl(g.pathname)):D(t(),g.pathname)),W=qe(()=>{const p=N(),v={};for(let A=0;A<p.length;A++)Object.assign(v,p[A].params);return v}),ie={pattern:d,path:()=>d,outlet:()=>null,resolvePath(p){return G(d,p)}};return ut(()=>{const{value:p,state:v}=r();ee(()=>{m(()=>{T="native",p!==S()&&u(p),b(v),ue(),x[1]([])}).then(()=>{T=void 0})})}),{base:ie,location:g,params:W,isRouting:y,renderPath:l,parsePath:i,navigatorFactory:Ve,matches:N,beforeLeave:c,preloadRoute:Xe,singleFlight:o.singleFlight===void 0?!0:o.singleFlight,submissions:x};function Je(p,v,A){ee(()=>{if(typeof v=="number"){v&&(s.go?s.go(v):console.warn("Router integration does not support relative routing"));return}const{replace:j,resolve:V,scroll:_,state:O}={replace:!1,resolve:!0,scroll:!0,...A},$=V?p.resolvePath(v):G("",v);if($===void 0)throw new Error(`Path '${v}' is not a routable path`);if(k.length>=Bt)throw new Error("Too many redirects");const ce=S();if($!==ce||O!==f()){if(H){const B=I();B&&(B.response={status:302,headers:new Headers({Location:$})}),a({value:$,replace:j,scroll:_,state:O})}else if(c.confirm($,A)){const B=k.push({value:ce,replace:j,scroll:_,state:f()});m(()=>{T="navigate",u($),b(O),ue(),x[1]([])}).then(()=>{k.length===B&&(T=void 0,Ye({value:$,state:O}))})}}})}function Ve(p){return p=p||dt(Fe)||ie,(v,A)=>Je(p,v,A)}function Ye(p){const v=k[0];v&&((p.value!==v.value||p.state!==v.state)&&a({...p,replace:v.replace,scroll:v.scroll}),k.length=0)}function Xe(p,v){const A=D(t(),p.pathname),j=T;T="preload";for(let V in A){const{route:_,params:O}=A[V];_.component&&_.component.preload&&_.component.preload();const{load:$}=_;U=!0,v&&$&&Ce(n(),()=>$({params:O,location:{pathname:p.pathname,search:p.search,hash:p.hash,query:Oe(p),state:null,key:""},intent:"preload"})),U=!1}T=j}function Qe(){const p=I();return p&&p.router&&p.router.submission?[p.router.submission]:[]}}function Xt(e,t,n,o){const{base:r,location:a,params:s}=e,{pattern:i,component:l,load:c}=o().route,d=C(()=>o().path);l&&l.preload&&l.preload(),U=!0;const y=c?c({params:s,location:a,intent:T||"initial"}):void 0;return U=!1,{parent:t,pattern:i,path:d,outlet:()=>l?Le(l,{params:s,location:a,data:y,get children(){return n()}}):n(),resolvePath(m){return G(r.path(),m,d())}}}const Ue=e=>t=>{const{base:n}=t,o=ht(()=>t.children),r=C(()=>De(o(),t.base||""));let a;const s=Yt(e,r,()=>a,{base:n,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(s),w(Kt.Provider,{value:s,get children(){return w(Qt,{routerState:s,get root(){return t.root},get load(){return t.rootLoad},get children(){return[(a=$e())&&null,w(Zt,{routerState:s,get branches(){return r()}})]}})}})};function Qt(e){const t=e.routerState.location,n=e.routerState.params,o=C(()=>e.load&&ee(()=>{de(!0),e.load({params:n,location:t,intent:Vt()||"initial"}),de(!1)}));return w(Pe,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:r=>w(r,{params:n,location:t,get data(){return o()},get children(){return e.children}})})}function Zt(e){if(H){const r=I();if(r&&r.router&&r.router.dataOnly){en(r,e.routerState,e.branches);return}r&&((r.router||(r.router={})).matches||(r.router.matches=e.routerState.matches().map(({route:a,path:s,params:i})=>({path:a.originalPath,pattern:a.pattern,match:s,params:i,info:a.info}))))}const t=[];let n;const o=C(Te(e.routerState.matches,(r,a,s)=>{let i=a&&r.length===a.length;const l=[];for(let c=0,d=r.length;c<d;c++){const y=a&&a[c],h=r[c];s&&y&&h.route.key===y.route.key?l[c]=s[c]:(i=!1,t[c]&&t[c](),pt(m=>{t[c]=m,l[c]=Xt(e.routerState,l[c-1]||e.routerState.base,fe(()=>o()[c+1]),()=>e.routerState.matches()[c])}))}return t.splice(r.length).forEach(c=>c()),s&&i?s:(n=l[0],l)}));return fe(()=>o()&&n)()}const fe=e=>()=>w(Pe,{get when(){return e()},keyed:!0,children:t=>w(Fe.Provider,{value:t,get children(){return t.outlet()}})});function en(e,t,n){const o=new URL(e.request.url),r=D(n,new URL(e.router.previousUrl||e.request.url).pathname),a=D(n,o.pathname);for(let s=0;s<a.length;s++){(!r[s]||a[s].route!==r[s].route)&&(e.router.dataOnly=!0);const{route:i,params:l}=a[s];i.load&&i.load({params:l,location:t.location,intent:"preload"})}}function tn([e,t],n,o){return[e,o?r=>t(o(r)):t]}function nn(e){if(e==="#")return null;try{return document.querySelector(e)}catch{return null}}function rn(e){let t=!1;const n=r=>typeof r=="string"?{value:r}:r,o=tn(F(n(e.get()),{equals:(r,a)=>r.value===a.value&&r.state===a.state}),void 0,r=>(!t&&e.set(r),r));return e.init&&ke(e.init((r=e.get())=>{t=!0,o[1](n(r)),t=!1})),Ue({signal:o,create:e.create,utils:e.utils})}function on(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function sn(e,t){const n=nn(`#${e}`);n?n.scrollIntoView():t&&window.scrollTo(0,0)}function an(e){const t=new URL(e);return t.pathname+t.search}function cn(e){let t;const n=e.url||(t=I())&&an(t.request.url)||"",o={value:e.transformUrl?e.transformUrl(n):n};return Ue({signal:[()=>o,r=>Object.assign(o,r)]})(e)}const ln=new Map;function un(e=!0,t=!1,n="/_server",o){return r=>{const a=r.base.path(),s=r.navigatorFactory(r.base);let i={};function l(u){return u.namespaceURI==="http://www.w3.org/2000/svg"}function c(u){if(u.defaultPrevented||u.button!==0||u.metaKey||u.altKey||u.ctrlKey||u.shiftKey)return;const f=u.composedPath().find(W=>W instanceof Node&&W.nodeName.toUpperCase()==="A");if(!f||t&&!f.hasAttribute("link"))return;const b=l(f),g=b?f.href.baseVal:f.href;if((b?f.target.baseVal:f.target)||!g&&!f.hasAttribute("state"))return;const x=(f.getAttribute("rel")||"").split(/\s+/);if(f.hasAttribute("download")||x&&x.includes("external"))return;const N=b?new URL(g,document.baseURI):new URL(g);if(!(N.origin!==window.location.origin||a&&N.pathname&&!N.pathname.toLowerCase().startsWith(a.toLowerCase())))return[f,N]}function d(u){const f=c(u);if(!f)return;const[b,g]=f,k=r.parsePath(g.pathname+g.search+g.hash),x=b.getAttribute("state");u.preventDefault(),s(k,{resolve:!1,replace:b.hasAttribute("replace"),scroll:!b.hasAttribute("noscroll"),state:x&&JSON.parse(x)})}function y(u){const f=c(u);if(!f)return;const[b,g]=f;typeof o=="function"&&(g.pathname=o(g.pathname)),i[g.pathname]||r.preloadRoute(g,b.getAttribute("preload")!=="false")}function h(u){const f=c(u);if(!f)return;const[b,g]=f;typeof o=="function"&&(g.pathname=o(g.pathname)),!i[g.pathname]&&(i[g.pathname]=setTimeout(()=>{r.preloadRoute(g,b.getAttribute("preload")!=="false"),delete i[g.pathname]},200))}function m(u){const f=c(u);if(!f)return;const[,b]=f;typeof o=="function"&&(b.pathname=o(b.pathname)),i[b.pathname]&&(clearTimeout(i[b.pathname]),delete i[b.pathname])}function S(u){if(u.defaultPrevented)return;let f=u.submitter&&u.submitter.hasAttribute("formaction")?u.submitter.getAttribute("formaction"):u.target.getAttribute("action");if(!f)return;if(!f.startsWith("https://action/")){const g=new URL(f,He);if(f=r.parsePath(g.pathname+g.search),!f.startsWith(n))return}if(u.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const b=ln.get(f);if(b){u.preventDefault();const g=new FormData(u.target);u.submitter&&u.submitter.name&&g.append(u.submitter.name,u.submitter.value),b.call({r,f:u.target},g)}}tt(["click","submit"]),document.addEventListener("click",d),e&&(document.addEventListener("mouseover",h),document.addEventListener("mouseout",m),document.addEventListener("focusin",y),document.addEventListener("touchstart",y)),document.addEventListener("submit",S),ke(()=>{document.removeEventListener("click",d),e&&(document.removeEventListener("mouseover",h),document.removeEventListener("mouseout",m),document.removeEventListener("focusin",y),document.removeEventListener("touchstart",y)),document.removeEventListener("submit",S)})}}function dn(e){if(H)return cn(e);const t=()=>{const o=window.location.pathname+window.location.search;return{value:e.transformUrl?e.transformUrl(o)+window.location.hash:o+window.location.hash,state:window.history.state}},n=_e();return rn({get:t,set({value:o,replace:r,scroll:a,state:s}){r?window.history.replaceState(It(s),"",o):window.history.pushState(s,"",o),sn(window.location.hash.slice(1),a),ae()},init:o=>on(window,"popstate",Ft(o,r=>{if(r&&r<0)return!n.confirm(r);{const a=t();return!n.confirm(a.value,{state:a.state})}})),create:un(e.preload,e.explicitLinks,e.actionBase,e.transformUrl),utils:{go:o=>window.history.go(o),beforeLeave:n}})(e)}function fn(e){e.forEach(t=>{if(!t.attrs.href)return;let n=document.head.querySelector(`link[href="${t.attrs.href}"]`);n||(n=document.createElement("link"),n.setAttribute("rel","preload"),n.setAttribute("as","style"),n.setAttribute("href",t.attrs.href),document.head.appendChild(n))})}var hn=" ";const pn={style:e=>Y("style",e.attrs,()=>L(e.children),!0),link:e=>Y("link",e.attrs,void 0,!0),script:e=>e.attrs.src?Y("script",nt(()=>e.attrs,{get id(){return e.key}}),()=>E(hn),!0):null};function re(e,t){let{tag:n,attrs:{key:o,...r}={key:void 0},children:a}=e;return pn[n]({attrs:{...r,nonce:t},key:o,children:a})}function mn(e,t,n,o="default"){return mt(async()=>{{const a=(await e.import())[o],i=(await t.inputs?.[e.src].assets()).filter(c=>c.tag==="style"||c.attrs.rel==="stylesheet");return typeof window<"u"&&fn(i),{default:c=>[...i.map(d=>re(d)),Le(a,c)]}}})}const q={NORMAL:0,WILDCARD:1,PLACEHOLDER:2};function gn(e={}){const t={options:e,rootNode:We(),staticRoutesMap:{}},n=o=>e.strictTrailingSlash?o:o.replace(/\/$/,"")||"/";if(e.routes)for(const o in e.routes)he(t,n(o),e.routes[o]);return{ctx:t,lookup:o=>yn(t,n(o)),insert:(o,r)=>he(t,n(o),r),remove:o=>wn(t,n(o))}}function yn(e,t){const n=e.staticRoutesMap[t];if(n)return n.data;const o=t.split("/"),r={};let a=!1,s=null,i=e.rootNode,l=null;for(let c=0;c<o.length;c++){const d=o[c];i.wildcardChildNode!==null&&(s=i.wildcardChildNode,l=o.slice(c).join("/"));const y=i.children.get(d);if(y===void 0){if(i&&i.placeholderChildren.length>1){const h=o.length-c;i=i.placeholderChildren.find(m=>m.maxDepth===h)||null}else i=i.placeholderChildren[0]||null;if(!i)break;i.paramName&&(r[i.paramName]=d),a=!0}else i=y}return(i===null||i.data===null)&&s!==null&&(i=s,r[i.paramName||"_"]=l,a=!0),i?a?{...i.data,params:a?r:void 0}:i.data:null}function he(e,t,n){let o=!0;const r=t.split("/");let a=e.rootNode,s=0;const i=[a];for(const l of r){let c;if(c=a.children.get(l))a=c;else{const d=bn(l);c=We({type:d,parent:a}),a.children.set(l,c),d===q.PLACEHOLDER?(c.paramName=l==="*"?`_${s++}`:l.slice(1),a.placeholderChildren.push(c),o=!1):d===q.WILDCARD&&(a.wildcardChildNode=c,c.paramName=l.slice(3)||"_",o=!1),i.push(c),a=c}}for(const[l,c]of i.entries())c.maxDepth=Math.max(i.length-l,c.maxDepth||0);return a.data=n,o===!0&&(e.staticRoutesMap[t]=a),a}function wn(e,t){let n=!1;const o=t.split("/");let r=e.rootNode;for(const a of o)if(r=r.children.get(a),!r)return n;if(r.data){const a=o.at(-1)||"";r.data=null,Object.keys(r.children).length===0&&r.parent&&(r.parent.children.delete(a),r.parent.wildcardChildNode=null,r.parent.placeholderChildren=[]),n=!0}return n}function We(e={}){return{type:e.type||q.NORMAL,maxDepth:0,parent:e.parent||null,children:new Map,data:e.data||null,paramName:e.paramName||null,wildcardChildNode:null,placeholderChildren:[]}}function bn(e){return e.startsWith("**")?q.WILDCARD:e[0]===":"||e==="*"?q.PLACEHOLDER:q.NORMAL}const je=[{page:!0,$component:{src:"src/routes/[...404].tsx?pick=default&pick=$css",build:()=>import("./_...404_.js"),import:()=>import("./_...404_.js")},path:"/*404",filePath:"/home/artae/Work/Github/tinymce-solid/demo/src/routes/[...404].tsx"},{page:!0,$component:{src:"src/routes/about.tsx?pick=default&pick=$css",build:()=>import("./about.js"),import:()=>import("./about.js")},path:"/about",filePath:"/home/artae/Work/Github/tinymce-solid/demo/src/routes/about.tsx"},{page:!0,$component:{src:"src/routes/index.tsx?pick=default&pick=$css",build:()=>import("./index.js"),import:()=>import("./index.js")},path:"/",filePath:"/home/artae/Work/Github/tinymce-solid/demo/src/routes/index.tsx"}],vn=Rn(je.filter(e=>e.page));function Rn(e){function t(n,o,r,a){const s=Object.values(n).find(i=>r.startsWith(i.id+"/"));return s?(t(s.children||(s.children=[]),o,r.slice(s.id.length)),n):(n.push({...o,id:r,path:r.replace(/\/\([^)/]+\)/g,"").replace(/\([^)/]+\)/g,"")}),n)}return e.sort((n,o)=>n.path.length-o.path.length).reduce((n,o)=>t(n,o,o.path,o.path),[])}function Sn(e,t){const n=An.lookup(e);if(n&&n.route){const o=n.route[`$${t}`];return o===void 0?void 0:{handler:o,params:n.params}}}function En(e){return e.$GET||e.$POST||e.$PUT||e.$PATCH||e.$DELETE}const An=gn({routes:je.reduce((e,t)=>{if(!En(t))return e;let n=t.path.replace(/\/\([^)/]+\)/g,"").replace(/\([^)/]+\)/g,"").replace(/\*([^/]*)/g,(o,r)=>`**:${r}`);if(/:[^/]*\?/g.test(n))throw new Error(`Optional parameters are not supported in API routes: ${n}`);if(e[n])throw new Error(`Duplicate API routes for "${n}" found at "${e[n].route.path}" and "${t.path}"`);return e[n]={route:t},e},{})});function Be(){function e(n){return{...n,...n.$$route?n.$$route.require().route:void 0,info:{...n.$$route?n.$$route.require().route.info:{},filesystem:!0},component:n.$component&&mn(n.$component,globalThis.MANIFEST.client,globalThis.MANIFEST.ssr),children:n.children?n.children.map(e):void 0}}return vn.map(e)}let pe;const $n=H?()=>I().routes:()=>pe||(pe=Be());var Cn=["<a",' href="/">Index</a>'],xn=["<a",' href="/about">About</a>'];function Tn(){return w(dn,{root:e=>w(ct,{get children(){return[w(lt,{children:"SolidStart - Basic"}),E(Cn,P()),E(xn,P()),w(gt,{get children(){return e.children}})]}}),get children(){return w($n,{})}})}var Ln=["<span",' style="font-size:1.5em;text-align:center;position:fixed;left:0px;bottom:55%;width:100%;">',"</span>"],Pn=["<span",' style="font-size:1.5em;text-align:center;position:fixed;left:0px;bottom:55%;width:100%;">500 | Internal Server Error</span>'];const kn=e=>{const t=H?"500 | Internal Server Error":"Error | Uncaught Client Exception";return w(yt,{fallback:n=>(console.error(n),[E(Ln,P(),L(t)),w(Ne,{code:500})]),get children(){return e.children}})},Nn=e=>{let t=!1;const n=wt(()=>e.children,o=>{console.error(o),t=!!o});return t?[E(Pn,P()),w(Ne,{code:500})]:n};var me=["<script",">","<\/script>"],_n=["<script",' type="module"'," async","><\/script>"],Hn=["<script",' type="module" async',"><\/script>"];const On=E("<!DOCTYPE html>");function Ke(e,t,n=[]){for(let o=0;o<t.length;o++){const r=t[o];if(r.path!==e[0].path)continue;let a=[...n,r];if(r.children){const s=e.slice(1);if(s.length===0||(a=Ke(s,r.children,a),!a))continue}return a}}function qn(e){const t=I(),n=t.nonce;let o=[];return Promise.resolve().then(async()=>{let r=[];if(t.router&&t.router.matches){const a=[...t.router.matches];for(;a.length&&(!a[0].info||!a[0].info.filesystem);)a.shift();const s=a.length&&Ke(a,t.routes);if(s)for(let i=0;i<s.length;i++){const l=s[i],c=globalThis.MANIFEST.client.inputs[l.$component.src];r.push(c.assets())}}o=await Promise.all(r).then(a=>[...new Map(a.flat().map(s=>[s.attrs.key,s])).values()].filter(s=>s.attrs.rel==="modulepreload"&&!t.assets.find(i=>i.attrs.key===s.attrs.key)))}),rt(()=>o.length?o.map(r=>re(r)):void 0),w(Ae,{get children(){return[On,w(Nn,{get children(){return w(e.document,{get assets(){return[w(ot,{}),t.assets.map(r=>re(r,n))]},get scripts(){return n?[E(me,P()+K("nonce",L(n,!0),!1),`window.manifest = ${JSON.stringify(t.manifest)}`),E(_n,P(),K("nonce",L(n,!0),!1),K("src",L(globalThis.MANIFEST.client.inputs[globalThis.MANIFEST.client.handler].output.path,!0),!1))]:[E(me,P(),`window.manifest = ${JSON.stringify(t.manifest)}`),E(Hn,P(),K("src",L(globalThis.MANIFEST.client.inputs[globalThis.MANIFEST.client.handler].output.path,!0),!1))]},get children(){return w(st,{get children(){return w(kn,{get children(){return w(Tn,{})}})}})}})}})]}})}function In(e={}){let t,n=!1;const o=s=>{if(t&&t!==s)throw new Error("Context conflict")};let r;if(e.asyncContext){const s=e.AsyncLocalStorage||globalThis.AsyncLocalStorage;s?r=new s:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const a=()=>{if(r&&t===void 0){const s=r.getStore();if(s!==void 0)return s}return t};return{use:()=>{const s=a();if(s===void 0)throw new Error("Context is not available");return s},tryUse:()=>a(),set:(s,i)=>{i||o(s),t=s,n=!0},unset:()=>{t=void 0,n=!1},call:(s,i)=>{o(s),t=s;try{return r?r.run(s,i):i()}finally{n||(t=void 0)}},async callAsync(s,i){t=s;const l=()=>{t=s},c=()=>t===s?l:void 0;we.add(c);try{const d=r?r.run(s,i):i();return n||(t=void 0),await d}finally{we.delete(c)}}}}function Fn(e={}){const t={};return{get(n,o={}){return t[n]||(t[n]=In({...e,...o})),t[n],t[n]}}}const J=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},ge="__unctx__",Mn=J[ge]||(J[ge]=Fn()),Dn=(e,t={})=>Mn.get(e,t),ye="__unctx_async_handlers__",we=J[ye]||(J[ye]=new Set);function Un(e){let t;const n=Ge(e),o={duplex:"half",method:e.method,headers:e.headers};return e.node.req.body instanceof ArrayBuffer?new Request(n,{...o,body:e.node.req.body}):new Request(n,{...o,get body(){return t||(t=Qn(e),t)}})}function Wn(e){return e.web??(e.web={request:Un(e),url:Ge(e)}),e.web.request}function jn(){return nr()}const ze=Symbol("$HTTPEvent");function Bn(e){return typeof e=="object"&&(e instanceof te||e?.[ze]instanceof te||e?.__is_event__===!0)}function R(e){return function(...t){let n=t[0];if(Bn(n))t[0]=n instanceof te||n.__is_event__?n:n[ze];else{if(!globalThis.app.config.server.experimental?.asyncContext)throw new Error("AsyncLocalStorage was not enabled. Use the `server.experimental.asyncContext: true` option in your app configuration to enable it. Or, pass the instance of HTTPEvent that you have as the first argument to the function.");if(n=jn(),!n)throw new Error("No HTTPEvent found in AsyncLocalStorage. Make sure you are using the function within the server runtime.");t.unshift(n)}return e(...t)}}const Ge=R(Tt),Kn=R(Et),oe=R(vt),be=R(At),zn=R($t),z=R(Lt),ve=R(Pt),Gn=R(kt),Jn=R(Nt),Re=R(Rt),Vn=R(Ct),Yn=R(xt),Xn=R(St),Qn=R(Ht),Zn=R(_t),er=R(Wn);function tr(){return Dn("nitro-app",{asyncContext:!!globalThis.app.config.server.experimental?.asyncContext,AsyncLocalStorage:qt})}function nr(){return tr().use().event}const Z=Symbol("fetchEvent");function rr(e){return{request:er(e),response:ar(e),clientAddress:Kn(e),locals:{},nativeEvent:e}}function or(e){if(!e[Z]){const t=rr(e);e[Z]=t}return e[Z]}class sr{constructor(t){le(this,"event");this.event=t}get(t){const n=ve(this.event,t);return Array.isArray(n)?n.join(", "):n||null}has(t){return this.get(t)!==void 0}set(t,n){return Gn(this.event,t,n)}delete(t){return Zn(this.event,t)}append(t,n){Jn(this.event,t,n)}getSetCookie(){const t=ve(this.event,"Set-Cookie");return Array.isArray(t)?t:[t]}forEach(t){return Object.entries(z(this.event)).forEach(([n,o])=>t(Array.isArray(o)?o.join(", "):o,n,this))}entries(){return Object.entries(z(this.event)).map(([t,n])=>[t,Array.isArray(n)?n.join(", "):n])[Symbol.iterator]()}keys(){return Object.keys(z(this.event))[Symbol.iterator]()}values(){return Object.values(z(this.event)).map(t=>Array.isArray(t)?t.join(", "):t)[Symbol.iterator]()}[Symbol.iterator](){return this.entries()[Symbol.iterator]()}}function ar(e){return{get status(){return be(e)},set status(t){oe(e,t)},get statusText(){return zn(e)},set statusText(t){oe(e,be(),t)},headers:new sr(e)}}function ir(e){const t=Vn(e.nativeEvent,"flash");if(!t)return;let n=JSON.parse(t);if(!n||!n.result)return;const o=[...n.input.slice(0,-1),new Map(n.input[n.input.length-1])];return Yn(e.nativeEvent,"flash","",{maxAge:0}),{input:o,url:n.url,pending:!1,result:n.error?new Error(n.result):n.result}}async function cr(e){const t=globalThis.MANIFEST.client;return globalThis.MANIFEST.ssr,e.response.headers.set("Content-Type","text/html"),Object.assign(e,{manifest:await t.json(),assets:[...await t.inputs[t.handler].assets()],router:{submission:ir(e)},routes:Be(),complete:!1,$islands:new Set})}const lr=new Set([301,302,303,307,308]);function se(e){return e.status&&lr.has(e.status)?e.status:302}function ur(e,t,n={}){return Ot({handler:o=>{const r=or(o);return bt(r,async()=>{const a=Sn(new URL(r.request.url).pathname,r.request.method);if(a){const m=(await a.handler.import())[r.request.method];r.params=a.params||{},X.context={event:r};const S=await m(r);if(S!==void 0)return S;if(r.request.method!=="GET")throw new Error(`API handler for ${r.request.method} "${r.request.url}" did not return a response.`)}const s=await t(r),i=typeof n=="function"?await n(s):{...n},l=i.mode||"stream";if(i.nonce&&(s.nonce=i.nonce),l==="sync"){const h=at(()=>(X.context.event=s,e(s)),i);if(s.complete=!0,s.response&&s.response.headers.get("Location")){const m=se(s.response);return Re(o,s.response.headers.get("Location"),m)}return h}if(i.onCompleteAll){const h=i.onCompleteAll;i.onCompleteAll=m=>{Ee(s)(m),h(m)}}else i.onCompleteAll=Ee(s);if(i.onCompleteShell){const h=i.onCompleteShell;i.onCompleteShell=m=>{Se(s,o)(),h(m)}}else i.onCompleteShell=Se(s,o);const c=it(()=>(X.context.event=s,e(s)),i);if(s.response&&s.response.headers.get("Location")){const h=se(s.response);return Re(o,s.response.headers.get("Location"),h)}if(l==="async")return c;const{writable:d,readable:y}=new TransformStream;return c.pipeTo(d),y})}})}function Se(e,t){return()=>{if(e.response&&e.response.headers.get("Location")){const n=se(e.response);oe(t,n),Xn(t,"Location",e.response.headers.get("Location"))}}}function Ee(e){return({write:t})=>{e.complete=!0;const n=e.response&&e.response.headers.get("Location");n&&t(`<script>window.location="${n}"<\/script>`)}}function dr(e,t){return ur(e,cr,t)}var fr=['<head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico">',"</head>"],hr=["<html",' lang="en">','<body><div id="app">',"</div><!--$-->","<!--/--></body></html>"];const Sr=dr(()=>w(qn,{document:({assets:e,children:t,scripts:n})=>E(hr,P(),w(Ae,{get children(){return E(fr,L(e))}}),L(t),L(n))}));export{Sr as default};
