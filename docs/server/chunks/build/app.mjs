import { isServer, createComponent, ssr, ssrHydrationKey, getRequestEvent, delegateEvents } from 'solid-js/web';
import { I as I$1, k as k$1 } from './index22.mjs';
import { r as ri } from '../runtime.mjs';
import { createContext, Suspense, createSignal, onCleanup, children, createMemo, getOwner, untrack, Show, on, createRoot, createRenderEffect, useContext, runWithOwner, createComponent as createComponent$1, startTransition, resetErrorBoundaries } from 'solid-js';
import 'node:http';
import 'node:https';
import 'node:zlib';
import 'node:stream';
import 'node:buffer';
import 'node:util';
import 'node:url';
import 'node:net';
import 'node:fs';
import 'node:path';
import 'fs';
import 'path';
import 'node:async_hooks';
import 'vinxi/lib/invariant';
import 'vinxi/lib/path';
import 'solid-js/web/storage';

function ae(){let e=new Set;function n(t){return e.add(t),()=>e.delete(t)}let o=!1;function r(t,a){if(o)return !(o=!1);const s={to:t,options:a,defaultPrevented:!1,preventDefault:()=>s.defaultPrevented=!0};for(const c of e)c.listener({...s,from:c.location,retry:h=>{h&&(o=!0),c.navigate(t,{...a,resolve:!1});}});return !s.defaultPrevented}return {subscribe:n,confirm:r}}let N;function H(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),N=window.history.state._depth;}isServer||H();function Fe(e){return {...e,_depth:window.history.state&&window.history.state._depth}}function Ue(e,n){let o=!1;return ()=>{const r=N;H();const t=r==null?null:N-r;if(o){o=!1;return}t&&n(t)?(o=!0,window.history.go(-t)):e();}}const ke=/^(?:[a-z0-9]+:)?\/\//i,Ie=/^\/+|(\/)\/+$/g,se="http://sr";function k(e,n=!1){const o=e.replace(Ie,"$1");return o?n||/^[?#]/.test(o)?o:"/"+o:""}function j(e,n,o){if(ke.test(n))return;const r=k(e),t=o&&k(o);let a="";return !t||n.startsWith("/")?a=r:t.toLowerCase().indexOf(r.toLowerCase())!==0?a=r+t:a=t,(a||"/")+k(n,!a)}function Te(e,n){return k(e).replace(/\/*(\*.*)?$/g,"")+k(n)}function ie(e){const n={};return e.searchParams.forEach((o,r)=>{n[r]=o;}),n}function qe(e,n,o){const[r,t]=e.split("/*",2),a=r.split("/").filter(Boolean),s=a.length;return c=>{const h=c.split("/").filter(Boolean),i=h.length-s;if(i<0||i>0&&t===void 0&&!n)return null;const m={path:s?"":"/",params:{}},y=p=>o===void 0?void 0:o[p];for(let p=0;p<s;p++){const v=a[p],R=h[p],u=v[0]===":",l=u?v.slice(1):v;if(u&&K(R,y(l)))m.params[l]=R;else if(u||!K(R,v))return null;m.path+=`/${R}`;}if(t){const p=i?h.slice(-i).join("/"):"";if(K(p,y(t)))m.params[t]=p;else return null}return m}}function K(e,n){const o=r=>r.localeCompare(e,void 0,{sensitivity:"base"})===0;return n===void 0?!0:typeof n=="string"?o(n):typeof n=="function"?n(e):Array.isArray(n)?n.some(o):n instanceof RegExp?n.test(e):!1}function Be(e){const[n,o]=e.pattern.split("/*",2),r=n.split("/").filter(Boolean);return r.reduce((t,a)=>t+(a.startsWith(":")?2:3),r.length-(o===void 0?0:1))}function ce(e){const n=new Map,o=getOwner();return new Proxy({},{get(r,t){return n.has(t)||runWithOwner(o,()=>n.set(t,createMemo(()=>e()[t]))),n.get(t)()},getOwnPropertyDescriptor(){return {enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}function ue(e){let n=/(\/?\:[^\/]+)\?/.exec(e);if(!n)return [e];let o=e.slice(0,n.index),r=e.slice(n.index+n[0].length);const t=[o,o+=n[1]];for(;n=/^(\/\:[^\/]+)\?/.exec(r);)t.push(o+=n[1]),r=r.slice(n[0].length);return ue(r).reduce((a,s)=>[...a,...t.map(c=>c+s)],[])}const _e=100,$e=createContext(),le=createContext();function je(e,n=""){const{component:o,load:r,children:t,info:a}=e,s=!t||Array.isArray(t)&&!t.length,c={key:e,component:o,load:r,info:a};return fe(e.path).reduce((h,i)=>{for(const m of ue(i)){const y=Te(n,m);let p=s?y:y.split("/*",1)[0];p=p.split("/").map(v=>v.startsWith(":")||v.startsWith("*")?v:encodeURIComponent(v)).join("/"),h.push({...c,originalPath:i,pattern:p,matcher:qe(p,!s,e.matchFilters)});}return h},[])}function De(e,n=0){return {routes:e,score:Be(e[e.length-1])*1e4-n,matcher(o){const r=[];for(let t=e.length-1;t>=0;t--){const a=e[t],s=a.matcher(o);if(!s)return null;r.unshift({...s,route:a});}return r}}}function fe(e){return Array.isArray(e)?e:[e]}function he(e,n="",o=[],r=[]){const t=fe(e);for(let a=0,s=t.length;a<s;a++){const c=t[a];if(c&&typeof c=="object"){c.hasOwnProperty("path")||(c.path="");const h=je(c,n);for(const i of h){o.push(i);const m=Array.isArray(c.children)&&c.children.length===0;if(c.children&&!m)he(c.children,i.pattern,o,r);else {const y=De([...o],r.length);r.push(y);}o.pop();}}}return o.length?r:r.sort((a,s)=>s.score-a.score)}function I(e,n){for(let o=0,r=e.length;o<r;o++){const t=e[o].matcher(n);if(t)return t}return []}function We(e,n){const o=new URL(se),r=createMemo(h=>{const i=e();try{return new URL(i,o)}catch{return console.error(`Invalid path ${i}`),h}},o,{equals:(h,i)=>h.href===i.href}),t=createMemo(()=>r().pathname),a=createMemo(()=>r().search,!0),s=createMemo(()=>r().hash),c=()=>"";return {get pathname(){return t()},get search(){return a()},get hash(){return s()},get state(){return n()},get key(){return c()},query:ce(on(a,()=>ie(r())))}}let E;function Ke(){return E}function Me(e,n,o,r={}){const{signal:[t,a],utils:s={}}=e,c=s.parsePath||(f=>f),h=s.renderPath||(f=>f),i=s.beforeLeave||ae(),m=j("",r.base||"");if(m===void 0)throw new Error(`${m} is not a valid base path`);m&&!t().value&&a({value:m,replace:!0,scroll:!1});const[y,p]=createSignal(!1),v=async f=>{p(!0);try{await startTransition(f);}finally{p(!1);}},[R,u]=createSignal(t().value),[l,g]=createSignal(t().state),d=We(R,l),x=[],A=createSignal(isServer?ye():[]),C=createMemo(()=>typeof r.transformUrl=="function"?I(n(),r.transformUrl(d.pathname)):I(n(),d.pathname)),B=ce(()=>{const f=C(),w={};for(let S=0;S<f.length;S++)Object.assign(w,f[S].params);return w}),z={pattern:m,path:()=>m,outlet:()=>null,resolvePath(f){return j(m,f)}};return createRenderEffect(()=>{const{value:f,state:w}=t();untrack(()=>{v(()=>{E="native",f!==R()&&u(f),g(w),resetErrorBoundaries(),A[1]([]);}).then(()=>{E=void 0;});});}),{base:z,location:d,params:B,isRouting:y,renderPath:h,parsePath:c,navigatorFactory:pe,matches:C,beforeLeave:i,preloadRoute:we,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:A};function me(f,w,S){untrack(()=>{if(typeof w=="number"){w&&(s.go?s.go(w):console.warn("Router integration does not support relative routing"));return}const{replace:_,resolve:W,scroll:O,state:F}={replace:!1,resolve:!0,scroll:!0,...S},L=W?f.resolvePath(w):j("",w);if(L===void 0)throw new Error(`Path '${w}' is not a routable path`);if(x.length>=_e)throw new Error("Too many redirects");const V=R();if(L!==V||F!==l()){if(isServer){const $=getRequestEvent();$&&($.response={status:302,headers:new Headers({Location:L})}),a({value:L,replace:_,scroll:O,state:F});}else if(i.confirm(L,S)){const $=x.push({value:V,replace:_,scroll:O,state:l()});v(()=>{E="navigate",u(L),g(F),resetErrorBoundaries(),A[1]([]);}).then(()=>{x.length===$&&(E=void 0,ge({value:L,state:F}));});}}});}function pe(f){return f=f||useContext(le)||z,(w,S)=>me(f,w,S)}function ge(f){const w=x[0];w&&((f.value!==w.value||f.state!==w.state)&&a({...f,replace:w.replace,scroll:w.scroll}),x.length=0);}function we(f,w){const S=I(n(),f.pathname),_=E;E="preload";for(let W in S){const{route:O,params:F}=S[W];O.component&&O.component.preload&&O.component.preload();const{load:L}=O;w&&L&&runWithOwner(o(),()=>L({params:F,location:{pathname:f.pathname,search:f.search,hash:f.hash,query:ie(f),state:null,key:""},intent:"preload"}));}E=_;}function ye(){const f=getRequestEvent();return f&&f.router&&f.router.submission?[f.router.submission]:[]}}function Ne(e,n,o,r){const{base:t,location:a,params:s}=e,{pattern:c,component:h,load:i}=r().route,m=createMemo(()=>r().path);h&&h.preload&&h.preload();const y=i?i({params:s,location:a,intent:E||"initial"}):void 0;return {parent:n,pattern:c,path:m,outlet:()=>h?createComponent$1(h,{params:s,location:a,data:y,get children(){return o()}}):o(),resolvePath(v){return j(t.path(),v,m())}}}const de=e=>n=>{const{base:o}=n,r=children(()=>n.children),t=createMemo(()=>he(r(),n.base||""));let a;const s=Me(e,t,()=>a,{base:o,singleFlight:n.singleFlight,transformUrl:n.transformUrl});return e.create&&e.create(s),createComponent($e.Provider,{value:s,get children(){return createComponent(He,{routerState:s,get root(){return n.root},get load(){return n.rootLoad},get children(){return [(a=getOwner())&&null,createComponent(ze,{routerState:s,get branches(){return t()}})]}})}})};function He(e){const n=e.routerState.location,o=e.routerState.params,r=createMemo(()=>e.load&&untrack(()=>{e.load({params:o,location:n,intent:Ke()||"initial"});}));return createComponent(Show,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:t=>createComponent(t,{params:o,location:n,get data(){return r()},get children(){return e.children}})})}function ze(e){if(isServer){const t=getRequestEvent();if(t&&t.router&&t.router.dataOnly){Ve(t,e.routerState,e.branches);return}t&&((t.router||(t.router={})).matches||(t.router.matches=e.routerState.matches().map(({route:a,path:s,params:c})=>({path:a.originalPath,pattern:a.pattern,match:s,params:c,info:a.info}))));}const n=[];let o;const r=createMemo(on(e.routerState.matches,(t,a,s)=>{let c=a&&t.length===a.length;const h=[];for(let i=0,m=t.length;i<m;i++){const y=a&&a[i],p=t[i];s&&y&&p.route.key===y.route.key?h[i]=s[i]:(c=!1,n[i]&&n[i](),createRoot(v=>{n[i]=v,h[i]=Ne(e.routerState,h[i-1]||e.routerState.base,Y(()=>r()[i+1]),()=>e.routerState.matches()[i]);}));}return n.splice(t.length).forEach(i=>i()),s&&c?s:(o=h[0],h)}));return Y(()=>r()&&o)()}const Y=e=>()=>createComponent(Show,{get when(){return e()},keyed:!0,children:n=>createComponent(le.Provider,{value:n,get children(){return n.outlet()}})});function Ve(e,n,o){const r=new URL(e.request.url),t=I(o,new URL(e.router.previousUrl||e.request.url).pathname),a=I(o,r.pathname);for(let s=0;s<a.length;s++){(!t[s]||a[s].route!==t[s].route)&&(e.router.dataOnly=!0);const{route:c,params:h}=a[s];c.load&&c.load({params:h,location:n.location,intent:"preload"});}}function Je([e,n],o,r){return [e,r?t=>n(r(t)):n]}function Xe(e){if(e==="#")return null;try{return document.querySelector(e)}catch{return null}}function Ge(e){let n=!1;const o=t=>typeof t=="string"?{value:t}:t,r=Je(createSignal(o(e.get()),{equals:(t,a)=>t.value===a.value&&t.state===a.state}),void 0,t=>(!n&&e.set(t),t));return e.init&&onCleanup(e.init((t=e.get())=>{n=!0,r[1](o(t)),n=!1;})),de({signal:r,create:e.create,utils:e.utils})}function Qe(e,n,o){return e.addEventListener(n,o),()=>e.removeEventListener(n,o)}function Ye(e,n){const o=Xe(`#${e}`);o?o.scrollIntoView():n&&window.scrollTo(0,0);}function Ze(e){const n=new URL(e);return n.pathname+n.search}function et(e){let n;const o=e.url||(n=getRequestEvent())&&Ze(n.request.url)||"",r={value:e.transformUrl?e.transformUrl(o):o};return de({signal:[()=>r,t=>Object.assign(r,t)]})(e)}const tt=new Map;function nt(e=!0,n=!1,o="/_server",r){return t=>{const a=t.base.path(),s=t.navigatorFactory(t.base);let c={};function h(u){return u.namespaceURI==="http://www.w3.org/2000/svg"}function i(u){if(u.defaultPrevented||u.button!==0||u.metaKey||u.altKey||u.ctrlKey||u.shiftKey)return;const l=u.composedPath().find(B=>B instanceof Node&&B.nodeName.toUpperCase()==="A");if(!l||n&&!l.hasAttribute("link"))return;const g=h(l),d=g?l.href.baseVal:l.href;if((g?l.target.baseVal:l.target)||!d&&!l.hasAttribute("state"))return;const A=(l.getAttribute("rel")||"").split(/\s+/);if(l.hasAttribute("download")||A&&A.includes("external"))return;const C=g?new URL(d,document.baseURI):new URL(d);if(!(C.origin!==window.location.origin||a&&C.pathname&&!C.pathname.toLowerCase().startsWith(a.toLowerCase())))return [l,C]}function m(u){const l=i(u);if(!l)return;const[g,d]=l,x=t.parsePath(d.pathname+d.search+d.hash),A=g.getAttribute("state");u.preventDefault(),s(x,{resolve:!1,replace:g.hasAttribute("replace"),scroll:!g.hasAttribute("noscroll"),state:A&&JSON.parse(A)});}function y(u){const l=i(u);if(!l)return;const[g,d]=l;typeof r=="function"&&(d.pathname=r(d.pathname)),c[d.pathname]||t.preloadRoute(d,g.getAttribute("preload")!=="false");}function p(u){const l=i(u);if(!l)return;const[g,d]=l;typeof r=="function"&&(d.pathname=r(d.pathname)),!c[d.pathname]&&(c[d.pathname]=setTimeout(()=>{t.preloadRoute(d,g.getAttribute("preload")!=="false"),delete c[d.pathname];},200));}function v(u){const l=i(u);if(!l)return;const[,g]=l;typeof r=="function"&&(g.pathname=r(g.pathname)),c[g.pathname]&&(clearTimeout(c[g.pathname]),delete c[g.pathname]);}function R(u){if(u.defaultPrevented)return;let l=u.submitter&&u.submitter.hasAttribute("formaction")?u.submitter.getAttribute("formaction"):u.target.getAttribute("action");if(!l)return;if(!l.startsWith("https://action/")){const d=new URL(l,se);if(l=t.parsePath(d.pathname+d.search),!l.startsWith(o))return}if(u.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const g=tt.get(l);if(g){u.preventDefault();const d=new FormData(u.target);u.submitter&&u.submitter.name&&d.append(u.submitter.name,u.submitter.value),g.call({r:t,f:u.target},d);}}delegateEvents(["click","submit"]),document.addEventListener("click",m),e&&(document.addEventListener("mouseover",p),document.addEventListener("mouseout",v),document.addEventListener("focusin",y),document.addEventListener("touchstart",y)),document.addEventListener("submit",R),onCleanup(()=>{document.removeEventListener("click",m),e&&(document.removeEventListener("mouseover",p),document.removeEventListener("mouseout",v),document.removeEventListener("focusin",y),document.removeEventListener("touchstart",y)),document.removeEventListener("submit",R);});}}function rt(e){if(isServer)return et(e);const n=()=>{const r=window.location.pathname+window.location.search;return {value:e.transformUrl?e.transformUrl(r)+window.location.hash:r+window.location.hash,state:window.history.state}},o=ae();return Ge({get:n,set({value:r,replace:t,scroll:a,state:s}){t?window.history.replaceState(Fe(s),"",r):window.history.pushState(s,"",r),Ye(window.location.hash.slice(1),a),H();},init:r=>Qe(window,"popstate",Ue(r,t=>{if(t&&t<0)return !o.confirm(t);{const a=n();return !o.confirm(a.value,{state:a.state})}})),create:nt(e.preload,e.explicitLinks,e.actionBase,e.transformUrl),utils:{go:r=>window.history.go(r),beforeLeave:o}})(e)}var ot=["<a",' href="/">Index</a>'],at=["<a",' href="/about">About</a>'];function dt(){return createComponent(rt,{root:e=>createComponent(I$1,{get children(){return [createComponent(k$1,{children:"SolidStart - Basic"}),ssr(ot,ssrHydrationKey()),ssr(at,ssrHydrationKey()),createComponent(Suspense,{get children(){return e.children}})]}}),get children(){return createComponent(ri,{})}})}

export { dt as default };
//# sourceMappingURL=app.mjs.map
